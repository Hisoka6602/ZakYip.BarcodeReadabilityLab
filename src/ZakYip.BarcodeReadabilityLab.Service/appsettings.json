{
  // ========================================
  // Serilog 日志配置
  // ========================================
  "Serilog": {
    // 使用的日志接收器
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    // 最小日志级别配置
    "MinimumLevel": {
      // 默认日志级别：Debug, Information, Warning, Error, Fatal
      "Default": "Information",
      // 特定命名空间的日志级别覆盖
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.Hosting.Lifetime": "Information",
        "System": "Warning"
      }
    },
    // 日志输出目标配置
    "WriteTo": [
      {
        // 控制台输出
        "Name": "Console",
        "Args": {
          // 控制台日志输出格式
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        // 文件输出
        "Name": "File",
        "Args": {
          // 日志文件路径，日期会自动追加到文件名中
          "path": "logs/barcode-lab-.log",
          // 滚动间隔：按天滚动日志文件
          "rollingInterval": "Day",
          // 当文件大小达到限制时是否滚动
          "rollOnFileSizeLimit": true,
          // 单个日志文件大小限制（字节），100MB
          "fileSizeLimitBytes": 104857600,
          // 保留的日志文件数量限制
          "retainedFileCountLimit": 31,
          // 文件日志输出格式（包含更详细的时间戳和源上下文）
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] [{SourceContext}] {Message:lj} {Properties:j}{NewLine}{Exception}",
          // 是否与其他进程共享日志文件
          "shared": false,
          // 刷新到磁盘的时间间隔（秒）
          "flushToDiskInterval": "00:00:01"
        }
      }
    ],
    // 日志上下文增强配置
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ],
    // 全局日志属性
    "Properties": {
      "Application": "BarcodeReadabilityLab"
    }
  },
  
  // ========================================
  // 日志选项配置
  // ========================================
  "LoggingOptions": {
    // 最小日志级别
    "MinimumLevel": "Information",
    // 是否启用审计日志（记录API请求和响应）
    "EnableAuditLog": true,
    // 是否启用性能日志（记录操作耗时）
    "EnablePerformanceLog": true,
    // 慢操作阈值（毫秒），超过此阈值的操作会被记录为警告
    "SlowOperationThresholdMs": 1000,
    // 日志文件路径
    "LogFilePath": "logs/barcode-lab-.log",
    // 滚动间隔
    "RollingInterval": "Day",
    // 文件大小限制（字节）
    "FileSizeLimitBytes": 104857600,
    // 保留文件数量限制
    "RetainedFileCountLimit": 31,
    // 是否在文件大小达到限制时滚动
    "RollOnFileSizeLimit": true
  },
  
  // ========================================
  // .NET Core 内置日志配置
  // ========================================
  "Logging": {
    "LogLevel": {
      // 默认日志级别
      "Default": "Information",
      // 宿主生命周期日志级别
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  
  // ========================================
  // 条码可读性服务配置
  // ========================================
  "BarcodeReadabilityService": {
    // 监控目录：存放待分析的条码图片
    "MonitorPath": "C:\\BarcodeImages\\Monitor",
    // 无法分析目录：存放分析失败的图片
    "UnableToAnalyzePath": "C:\\BarcodeImages\\UnableToAnalyze",
    // 训练数据目录：存放用于模型训练的图片
    "TrainingDataPath": "C:\\BarcodeImages\\TrainingData",
    // 模型目录：存放训练好的ML模型
    "ModelPath": "C:\\BarcodeImages\\Models",
    // 置信度阈值：预测置信度低于此值的图片会被移动到无法分析目录
    "ConfidenceThreshold": 0.9,
    // 支持的图片扩展名
    "SupportedImageExtensions": [ ".jpg", ".jpeg", ".png", ".bmp" ]
  },
  
  // ========================================
  // API 服务配置
  // ========================================
  "ApiSettings": {
    // API 服务监听端口
    "Port": 4000,
    // API 服务监听地址（包含协议、主机和端口）
    "Urls": "http://localhost:4000"
  },
  
  // ========================================
  // ML.NET 模型配置
  // ========================================
  "BarcodeMlModel": {
    // 当前使用的模型文件路径（如果文件不存在，服务会启动但分析功能不可用）
    "CurrentModelPath": "C:\\BarcodeImages\\Models\\noread-classifier-current.zip"
  },
  
  // ========================================
  // 条码分析器配置
  // ========================================
  "BarcodeAnalyzerOptions": {
    // 监控目录：与 BarcodeReadabilityService.MonitorPath 保持一致
    "WatchDirectory": "C:\\BarcodeImages\\Monitor",
    // 未解决图片目录：与 BarcodeReadabilityService.UnableToAnalyzePath 保持一致
    "UnresolvedDirectory": "C:\\BarcodeImages\\UnableToAnalyze",
    // 置信度阈值：预测置信度需要达到此值才被认为是高置信度
    "ConfidenceThreshold": 0.9,
    // 是否递归监控子目录
    "IsRecursive": false
  },
  
  // ========================================
  // 模型训练配置
  // ========================================
  "TrainingOptions": {
    // 训练数据根目录：包含分类子目录的根目录
    "TrainingRootDirectory": "C:\\BarcodeImages\\TrainingData",
    // 输出模型目录：训练完成的模型保存位置
    "OutputModelDirectory": "C:\\BarcodeImages\\Models",
    // 验证集比例：用于验证的数据占总数据的比例（0.0-1.0）
    "ValidationSplitRatio": 0.2,
    // 学习率：模型训练的学习率，控制参数更新的步长
    "LearningRate": 0.01,
    // 训练轮数：完整遍历训练数据集的次数
    "Epochs": 50,
    // 批次大小：每次训练迭代处理的样本数量
    "BatchSize": 20,
    // 最大并发训练任务数：同时运行的训练任务数量限制
    "MaxConcurrentTrainingJobs": 2,
    // 是否启用资源监控：监控训练过程中的CPU和内存使用情况
    "EnableResourceMonitoring": true,
    // 资源监控间隔（秒）：多久记录一次资源使用情况
    "ResourceMonitoringIntervalSeconds": 10,
    
    // 数据增强配置：用于扩充训练数据，提高模型泛化能力
    "DataAugmentation": {
      // 是否启用数据增强
      "Enable": true,
      // 每个样本生成的增强图片数量
      "AugmentedImagesPerSample": 1,
      // 验证集每个样本生成的增强图片数量
      "EvaluationAugmentedImagesPerSample": 1,
      // 是否启用旋转增强
      "EnableRotation": true,
      // 旋转角度列表（度）
      "RotationAngles": [ -10, 0, 10 ],
      // 旋转概率：每个样本被旋转的概率（0.0-1.0）
      "RotationProbability": 0.6,
      // 是否启用水平翻转
      "EnableHorizontalFlip": true,
      // 水平翻转概率
      "HorizontalFlipProbability": 0.5,
      // 是否启用垂直翻转
      "EnableVerticalFlip": false,
      // 垂直翻转概率
      "VerticalFlipProbability": 0.2,
      // 是否启用亮度调整
      "EnableBrightnessAdjustment": true,
      // 亮度调整概率
      "BrightnessProbability": 0.6,
      // 亮度调整下限（乘数，1.0表示原始亮度）
      "BrightnessLower": 0.85,
      // 亮度调整上限（乘数，1.0表示原始亮度）
      "BrightnessUpper": 1.15,
      // 是否在增强后打乱数据顺序
      "ShuffleAugmentedData": true,
      // 随机种子：确保增强结果可复现
      "RandomSeed": 42
    },
    
    // 数据平衡配置：处理类别不平衡问题
    "DataBalancing": {
      // 平衡策略：OverSample（过采样）、UnderSample（欠采样）、None（不平衡）
      "Strategy": "OverSample",
      // 是否在平衡后打乱数据顺序
      "ShuffleAfterBalancing": true,
      // 随机种子：确保平衡结果可复现
      "RandomSeed": 42
    }
  },
  
  // ========================================
  // 训练档位配置
  // ========================================
  "TrainingProfiles": {
    // 默认使用的训练档位：Debug（调试）、Standard（标准）、HighQuality（高质量）
    "DefaultProfileType": "Standard",
    
    // Debug 档位：用于快速开发调试，训练速度优先
    "Debug": {
      "Epochs": 5,
      "BatchSize": 32,
      "LearningRate": 0.01,
      "EnableEarlyStopping": false,
      "EarlyStoppingPatience": 3,
      "EarlyStoppingMinDelta": 0.001,
      "EnableDataAugmentation": false,
      "DataBalancingStrategy": "None",
      "ImageWidth": 224,
      "ImageHeight": 224,
      "ConvertToGrayscale": false,
      "EnablePreprocessingCache": true,
      "ValidationSplitRatio": 0.2,
      "EvaluationFrequency": 1
    },
    
    // Standard 档位：用于日常训练，平衡速度和质量
    "Standard": {
      "Epochs": 50,
      "BatchSize": 20,
      "LearningRate": 0.01,
      "EnableEarlyStopping": true,
      "EarlyStoppingPatience": 5,
      "EarlyStoppingMinDelta": 0.001,
      "EnableDataAugmentation": true,
      "DataAugmentation": {
        "Enable": true,
        "AugmentedImagesPerSample": 1,
        "EvaluationAugmentedImagesPerSample": 1,
        "EnableRotation": true,
        "RotationAngles": [ -10, 0, 10 ],
        "RotationProbability": 0.5,
        "EnableHorizontalFlip": true,
        "HorizontalFlipProbability": 0.3,
        "EnableVerticalFlip": false,
        "VerticalFlipProbability": 0.0,
        "EnableBrightnessAdjustment": true,
        "BrightnessProbability": 0.4,
        "BrightnessLower": 0.9,
        "BrightnessUpper": 1.1,
        "ShuffleAugmentedData": true,
        "RandomSeed": 42
      },
      "DataBalancingStrategy": "OverSample",
      "ImageWidth": 224,
      "ImageHeight": 224,
      "ConvertToGrayscale": false,
      "EnablePreprocessingCache": true,
      "ValidationSplitRatio": 0.2,
      "EvaluationFrequency": 1
    },
    
    // HighQuality 档位：用于发布前大规模训练，质量优先
    "HighQuality": {
      "Epochs": 100,
      "BatchSize": 16,
      "LearningRate": 0.005,
      "L2Regularization": 0.0001,
      "EnableEarlyStopping": true,
      "EarlyStoppingPatience": 10,
      "EarlyStoppingMinDelta": 0.0005,
      "EnableDataAugmentation": true,
      "DataAugmentation": {
        "Enable": true,
        "AugmentedImagesPerSample": 2,
        "EvaluationAugmentedImagesPerSample": 1,
        "EnableRotation": true,
        "RotationAngles": [ -15, -10, -5, 0, 5, 10, 15 ],
        "RotationProbability": 0.7,
        "EnableHorizontalFlip": true,
        "HorizontalFlipProbability": 0.5,
        "EnableVerticalFlip": false,
        "VerticalFlipProbability": 0.2,
        "EnableBrightnessAdjustment": true,
        "BrightnessProbability": 0.6,
        "BrightnessLower": 0.85,
        "BrightnessUpper": 1.15,
        "ShuffleAugmentedData": true,
        "RandomSeed": 42
      },
      "DataBalancingStrategy": "OverSample",
      "ImageWidth": 224,
      "ImageHeight": 224,
      "ConvertToGrayscale": false,
      "EnablePreprocessingCache": true,
      "ValidationSplitRatio": 0.2,
      "EvaluationFrequency": 1
    }
  },
  
  // ========================================
  // 在线推理评估配置
  // ========================================
  "EvaluationOptions": {
    // 单个图片文件的最大字节数（默认 10MB）
    "MaxImageSizeBytes": 10485760,
    // 批量评估时的最大文件数量（默认 100）
    "MaxImageCount": 100,
    // 允许的图片文件扩展名
    "AllowedExtensions": [ ".jpg", ".jpeg", ".png", ".bmp" ]
  }
}
