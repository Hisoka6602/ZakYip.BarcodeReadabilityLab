# ZakYip.BarcodeReadabilityLab

## é¡¹ç›®ç®€ä»‹

**æ¡ç å›¾ç‰‡å¯è¯»æ€§åˆ†æå®éªŒå®¤** - åŸºäº ML.NET çš„æ™ºèƒ½æ¡ç å›¾ç‰‡åˆ†ç±»ä¸åˆ†æç³»ç»Ÿ

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„æ¡ç å›¾ç‰‡å¯è¯»æ€§åˆ†æå¹³å°ï¼Œé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ”¯æŒè‡ªåŠ¨ç›‘æ§ç›®å½•ã€å®æ—¶åˆ†ææ¡ç å›¾ç‰‡ã€å¼‚æ­¥è®­ç»ƒä»»åŠ¡ç®¡ç†ã€æ¨¡å‹ç‰ˆæœ¬æ§åˆ¶å’Œçƒ­åˆ‡æ¢ç­‰åŠŸèƒ½ã€‚ç³»ç»Ÿå¯ä½œä¸º Windows æœåŠ¡è¿è¡Œï¼Œæä¾› HTTP API å’Œ SignalR å®æ—¶é€šä¿¡æ¥å£ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **ML.NET å›¾åƒåˆ†ç±»**: åŸºäºæ·±åº¦å­¦ä¹ çš„æ¡ç å¯è¯»æ€§æ™ºèƒ½åˆ†æ
- ğŸ“ **è‡ªåŠ¨ç›®å½•ç›‘æ§**: å®æ—¶ç›‘æ§æŒ‡å®šç›®å½•ï¼Œè‡ªåŠ¨åˆ†ææ–°å¢å›¾ç‰‡
- ğŸ”„ **æ¨¡å‹çƒ­åˆ‡æ¢**: æ”¯æŒåœ¨çº¿æ›´æ–°æ¨¡å‹ï¼Œæ— éœ€é‡å¯æœåŠ¡
- ğŸ“Š **è®­ç»ƒä»»åŠ¡ç®¡ç†**: å¼‚æ­¥è®­ç»ƒä»»åŠ¡é˜Ÿåˆ—ï¼Œæ”¯æŒå¹¶å‘æ§åˆ¶
- ğŸŒ **RESTful API**: å®Œæ•´çš„ HTTP API æ¥å£
- ğŸ”” **SignalR å®æ—¶æ¨é€**: è®­ç»ƒè¿›åº¦å®æ—¶é€šçŸ¥
- ğŸ’¾ **æŒä¹…åŒ–å­˜å‚¨**: åŸºäº SQLite çš„è®­ç»ƒä»»åŠ¡å†å²è®°å½•
- ğŸªŸ **Windows æœåŠ¡**: æ”¯æŒä½œä¸º Windows æœåŠ¡åå°è¿è¡Œ
- ğŸ§ª **å®Œæ•´æµ‹è¯•**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•è¦†ç›–

---

## ç›®å½•

- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [é¡¹ç›®å®Œæˆåº¦](#é¡¹ç›®å®Œæˆåº¦)
- [åŠŸèƒ½è¯´æ˜](#åŠŸèƒ½è¯´æ˜)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å½“å‰ç¼ºé™·](#å½“å‰ç¼ºé™·)
- [æœªæ¥ä¼˜åŒ–æ–¹å‘](#æœªæ¥ä¼˜åŒ–æ–¹å‘-æŒ‰-pr-å•ä½è§„åˆ’)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [ç›¸å…³æ–‡æ¡£](#ç›¸å…³æ–‡æ¡£)

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **.NET 8.0**: æœ€æ–°çš„ .NET å¹³å°
- **C# 12**: ä½¿ç”¨ç°ä»£ C# ç‰¹æ€§ï¼ˆrecord classã€initã€file-scoped namespace ç­‰ï¼‰

### æœºå™¨å­¦ä¹ 
- **ML.NET 5.0.0**: Microsoft çš„æœºå™¨å­¦ä¹ æ¡†æ¶
- **Microsoft.ML.Vision**: å›¾åƒåˆ†ç±»ä¸“ç”¨ API
- **Microsoft.ML.ImageAnalytics**: å›¾åƒæ•°æ®å¤„ç†

### Web æ¡†æ¶
- **ASP.NET Core Minimal API**: è½»é‡çº§ Web API
- **SignalR**: å®æ—¶åŒå‘é€šä¿¡
- **Serilog**: ç»“æ„åŒ–æ—¥å¿—è®°å½•

### æ•°æ®å­˜å‚¨
- **Entity Framework Core 8.0**: ORM æ¡†æ¶
- **SQLite**: è½»é‡çº§æ•°æ®åº“ï¼ˆè®­ç»ƒä»»åŠ¡å†å²ï¼‰

### å›¾åƒå¤„ç†
- **SixLabors.ImageSharp 3.1.12**: è·¨å¹³å°å›¾åƒå¤„ç†åº“

### æµ‹è¯•
- **xUnit 2.5.6**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **Moq 4.20.72**: Mock æ¡†æ¶
- **Microsoft.AspNetCore.Mvc.Testing**: é›†æˆæµ‹è¯•æ”¯æŒ

### å…¶ä»–
- **Microsoft.Extensions.Hosting**: æ‰˜ç®¡æœåŠ¡æ¡†æ¶
- **Windows Services**: Windows æœåŠ¡æ”¯æŒ

---

## é¡¹ç›®æ¶æ„

### åˆ†å±‚æ¶æ„

é¡¹ç›®é‡‡ç”¨ **æ´‹è‘±æ¶æ„ï¼ˆOnion Architectureï¼‰** è®¾è®¡ï¼Œä¸¥æ ¼éµå¾ªä¾èµ–åè½¬åŸåˆ™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presentation Layer (Service)                           â”‚
â”‚  - Program.cs (ä¸»å…¥å£)                                   â”‚
â”‚  - Minimal API Endpoints                                â”‚
â”‚  - Controllers (ä¼ ç»Ÿ MVCï¼Œå‘åå…¼å®¹)                        â”‚
â”‚  - SignalR Hubs                                         â”‚
â”‚  - Workers (ç›®å½•ç›‘æ§ã€è®­ç»ƒä»»åŠ¡)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Layer                                      â”‚
â”‚  - Services (ä¸šåŠ¡æœåŠ¡)                                   â”‚
â”‚  - Options (é…ç½®é€‰é¡¹)                                    â”‚
â”‚  - Events (äº‹ä»¶å®šä¹‰)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Infrastructure      â”‚  Infrastructure                  â”‚
â”‚  (MLNet)             â”‚  (Persistence)                   â”‚
â”‚  - ML.NET è®­ç»ƒå™¨     â”‚  - EF Core æ•°æ®è®¿é—®              â”‚
â”‚  - æ¨¡å‹åˆ†æå™¨        â”‚  - SQLite ä»“å‚¨                   â”‚
â”‚  - é¢„æµ‹æ˜ å°„å™¨        â”‚  - å®ä½“æ˜ å°„                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Core Layer (Domain)                                    â”‚
â”‚  - Domain Models (é¢†åŸŸæ¨¡å‹)                              â”‚
â”‚  - Contracts (æ¥å£å®šä¹‰)                                  â”‚
â”‚  - Exceptions (ä¸šåŠ¡å¼‚å¸¸)                                 â”‚
â”‚  - çº¯ C# ä»£ç ï¼Œæ— å¤–éƒ¨ä¾èµ–                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡¹ç›®ç»“æ„

```
ZakYip.BarcodeReadabilityLab/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Core/              # æ ¸å¿ƒå±‚ï¼šé¢†åŸŸæ¨¡å‹å’Œå¥‘çº¦
â”‚   â”‚   â””â”€â”€ Domain/
â”‚   â”‚       â”œâ”€â”€ Models/                                  # é¢†åŸŸæ¨¡å‹
â”‚   â”‚       â”‚   â”œâ”€â”€ BarcodeSample.cs                    # æ¡ç æ ·æœ¬
â”‚   â”‚       â”‚   â”œâ”€â”€ BarcodeAnalysisResult.cs            # åˆ†æç»“æœ
â”‚   â”‚       â”‚   â”œâ”€â”€ NoreadReason.cs                     # ä¸å¯è¯»åŸå› æšä¸¾
â”‚   â”‚       â”‚   â”œâ”€â”€ TrainingJob.cs                      # è®­ç»ƒä»»åŠ¡
â”‚   â”‚       â”‚   â”œâ”€â”€ ModelVersion.cs                     # æ¨¡å‹ç‰ˆæœ¬
â”‚   â”‚       â”‚   â”œâ”€â”€ DataAugmentationOptions.cs          # æ•°æ®å¢å¼ºé€‰é¡¹
â”‚   â”‚       â”‚   â””â”€â”€ DataBalancingOptions.cs             # æ•°æ®å¹³è¡¡é€‰é¡¹
â”‚   â”‚       â”œâ”€â”€ Contracts/                               # æ¥å£å®šä¹‰
â”‚   â”‚       â”‚   â”œâ”€â”€ IBarcodeReadabilityAnalyzer.cs      # åˆ†æå™¨æ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ IImageClassificationTrainer.cs      # è®­ç»ƒå™¨æ¥å£
â”‚   â”‚       â”‚   â””â”€â”€ ITrainingJobRepository.cs           # ä»“å‚¨æ¥å£
â”‚   â”‚       â””â”€â”€ Exceptions/                              # ä¸šåŠ¡å¼‚å¸¸
â”‚   â”‚           â””â”€â”€ TrainingException.cs
â”‚   â”‚
â”‚   â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Application/       # åº”ç”¨å±‚ï¼šä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainingJobService.cs                   # è®­ç»ƒä»»åŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ModelVersionService.cs                  # æ¨¡å‹ç‰ˆæœ¬æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ DirectoryMonitoringService.cs           # ç›®å½•ç›‘æ§æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ UnresolvedImageRouter.cs                # æœªè¯†åˆ«å›¾ç‰‡è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ Workers/
â”‚   â”‚   â”‚   â””â”€â”€ TrainingWorker.cs                       # è®­ç»ƒä»»åŠ¡åå°å¤„ç†
â”‚   â”‚   â”œâ”€â”€ Options/
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainingOptions.cs                      # è®­ç»ƒé€‰é¡¹
â”‚   â”‚   â”‚   â””â”€â”€ BarcodeAnalyzerOptions.cs               # åˆ†æå™¨é€‰é¡¹
â”‚   â”‚   â””â”€â”€ Events/
â”‚   â”‚       â””â”€â”€ TrainingProgressEventArgs.cs            # è®­ç»ƒè¿›åº¦äº‹ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Infrastructure.MLNet/  # åŸºç¡€è®¾æ–½ï¼šML.NET å®ç°
â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â”œâ”€â”€ MlNetImageClassificationTrainer.cs      # ML.NET è®­ç»ƒå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MlNetBarcodeReadabilityAnalyzer.cs      # ML.NET åˆ†æå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MlNetModelVariantAnalyzer.cs            # å¤šæ¨¡å‹å¯¹æ¯”
â”‚   â”‚   â”‚   â””â”€â”€ MlNetPredictionMapper.cs                # é¢„æµ‹æ˜ å°„
â”‚   â”‚   â””â”€â”€ Models/
â”‚   â”‚       â””â”€â”€ ImagePrediction.cs                       # é¢„æµ‹ç»“æœæ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Infrastructure.Persistence/  # åŸºç¡€è®¾æ–½ï¼šæŒä¹…åŒ–
â”‚   â”‚   â”œâ”€â”€ Data/
â”‚   â”‚   â”‚   â””â”€â”€ TrainingJobDbContext.cs                 # EF Core ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainingJobEntity.cs                    # è®­ç»ƒä»»åŠ¡å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ ModelVersionEntity.cs                   # æ¨¡å‹ç‰ˆæœ¬å®ä½“
â”‚   â”‚   â””â”€â”€ Repositories/
â”‚   â”‚       â”œâ”€â”€ TrainingJobRepository.cs                # è®­ç»ƒä»»åŠ¡ä»“å‚¨
â”‚   â”‚       â””â”€â”€ ModelVersionRepository.cs               # æ¨¡å‹ç‰ˆæœ¬ä»“å‚¨
â”‚   â”‚
â”‚   â””â”€â”€ ZakYip.BarcodeReadabilityLab.Service/           # è¡¨ç¤ºå±‚ï¼šAPI å’Œå®¿ä¸»
â”‚       â”œâ”€â”€ Program.cs                                   # åº”ç”¨ç¨‹åºå…¥å£
â”‚       â”œâ”€â”€ Endpoints/
â”‚       â”‚   â”œâ”€â”€ TrainingEndpoints.cs                    # è®­ç»ƒ API ç«¯ç‚¹
â”‚       â”‚   â””â”€â”€ ModelEndpoints.cs                       # æ¨¡å‹ç®¡ç†ç«¯ç‚¹
â”‚       â”œâ”€â”€ Controllers/
â”‚       â”‚   â””â”€â”€ TrainingController.cs                   # ä¼ ç»Ÿæ§åˆ¶å™¨ï¼ˆå‘åå…¼å®¹ï¼‰
â”‚       â”œâ”€â”€ Hubs/
â”‚       â”‚   â””â”€â”€ TrainingProgressHub.cs                  # SignalR Hub
â”‚       â”œâ”€â”€ Workers/
â”‚       â”‚   â””â”€â”€ DirectoryMonitoringWorker.cs            # ç›®å½•ç›‘æ§åå°æœåŠ¡
â”‚       â”œâ”€â”€ Models/                                      # API è¯·æ±‚/å“åº”æ¨¡å‹
â”‚       â””â”€â”€ appsettings.json                            # é…ç½®æ–‡ä»¶
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Core.Tests/        # æ ¸å¿ƒå±‚æµ‹è¯•
    â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Application.Tests/ # åº”ç”¨å±‚æµ‹è¯•
    â”œâ”€â”€ ZakYip.BarcodeReadabilityLab.Service.Tests/     # æœåŠ¡å±‚æµ‹è¯•
    â””â”€â”€ ZakYip.BarcodeReadabilityLab.IntegrationTests/  # é›†æˆæµ‹è¯•
```

### æ¶æ„åŸåˆ™

1. **ä¾èµ–æ–¹å‘**: å¤–å±‚ä¾èµ–å†…å±‚ï¼ŒCore å±‚ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“
2. **æ¥å£éš”ç¦»**: é€šè¿‡æ¥å£å®šä¹‰å¥‘çº¦ï¼Œå®ç°è§£è€¦
3. **ä¾èµ–æ³¨å…¥**: æ‰€æœ‰ä¾èµ–é€šè¿‡ DI å®¹å™¨ç®¡ç†
4. **ä¸å¯å˜æ€§**: ä¼˜å…ˆä½¿ç”¨ `record class` å’Œ `init` å±æ€§
5. **æ¸…æ™°è¾¹ç•Œ**: æ¯å±‚èŒè´£æ˜ç¡®ï¼Œä¸è·¨å±‚è®¿é—®

---

## é¡¹ç›®å®Œæˆåº¦

### æ€»ä½“å®Œæˆåº¦ï¼šçº¦ 80%

é¡¹ç›®æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œå¯æ­£å¸¸ç¼–è¯‘ã€è¿è¡Œå’Œè°ƒè¯•ã€‚æ—¥å¿—é…ç½®ã€API æ–‡æ¡£å’Œæµ‹è¯•å·²å…¨éƒ¨å®Œå–„ã€‚éƒ¨åˆ†é«˜çº§ç‰¹æ€§å’Œä¼˜åŒ–åŠŸèƒ½å¾…å®Œå–„ã€‚

### âœ… å·²å®ŒæˆåŠŸèƒ½ (100%)

#### 1. æ ¸å¿ƒæ¶æ„
- âœ… å››å±‚åˆ†å±‚æ¶æ„ï¼ˆCoreã€Applicationã€Infrastructureã€Serviceï¼‰
- âœ… ä¾èµ–æ³¨å…¥é…ç½®
- âœ… é¢†åŸŸæ¨¡å‹å®šä¹‰
- âœ… æ¥å£å¥‘çº¦å®šä¹‰

#### 2. ML.NET å›¾åƒåˆ†ç±»
- âœ… æ¨¡å‹è®­ç»ƒåŠŸèƒ½ï¼ˆåŸºäº ImageClassificationTrainerï¼‰
- âœ… æ¨¡å‹åŠ è½½ä¸æ¨ç†
- âœ… 7 ç§ NoreadReason åˆ†ç±»æ”¯æŒ
- âœ… ç½®ä¿¡åº¦è®¡ç®—
- âœ… æ•°æ®å¢å¼ºï¼ˆæ—‹è½¬ã€ç¿»è½¬ã€äº®åº¦è°ƒæ•´ï¼‰
- âœ… æ•°æ®å¹³è¡¡ï¼ˆè¿‡é‡‡æ ·ã€æ¬ é‡‡æ ·ï¼‰
- âœ… è®­ç»ƒè¶…å‚æ•°é…ç½®ï¼ˆå­¦ä¹ ç‡ã€Epochã€Batch Sizeï¼‰

#### 3. ç›®å½•ç›‘æ§ä¸è‡ªåŠ¨åˆ†æ
- âœ… FileSystemWatcher å®æ—¶ç›‘æ§
- âœ… è‡ªåŠ¨è§¦å‘å›¾ç‰‡åˆ†æ
- âœ… æ™ºèƒ½è·¯ç”±ï¼ˆé«˜ç½®ä¿¡åº¦åˆ é™¤ï¼Œä½ç½®ä¿¡åº¦å½’æ¡£ï¼‰
- âœ… å¤šæ ¼å¼æ”¯æŒï¼ˆ.jpgã€.jpegã€.pngã€.bmpï¼‰
- âœ… é€’å½’ç›‘æ§é€‰é¡¹

#### 4. è®­ç»ƒä»»åŠ¡ç®¡ç†
- âœ… å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
- âœ… ä»»åŠ¡çŠ¶æ€è¿½è¸ªï¼ˆQueuedã€Runningã€Completedã€Failedã€Cancelledï¼‰
- âœ… åå°å·¥ä½œå™¨ï¼ˆTrainingWorkerï¼‰
- âœ… å¹¶å‘æ§åˆ¶ï¼ˆå¯é…ç½®å¹¶å‘æ•°ï¼‰
- âœ… è®­ç»ƒè¿›åº¦æŠ¥å‘Š
- âœ… ä»»åŠ¡æŒä¹…åŒ–ï¼ˆSQLiteï¼‰

#### 5. æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
- âœ… æ¨¡å‹ç‰ˆæœ¬æ³¨å†Œ
- âœ… æ¨¡å‹æ¿€æ´»ä¸å›æ»š
- âœ… æ¨¡å‹å¯¼å…¥/å¯¼å‡º
- âœ… å¤šæ¨¡å‹å¯¹æ¯”ï¼ˆA/B æµ‹è¯•ï¼‰
- âœ… æ¨¡å‹å…ƒæ•°æ®å­˜å‚¨

#### 6. HTTP API
- âœ… Minimal API æ¶æ„
- âœ… è®­ç»ƒä»»åŠ¡ç«¯ç‚¹ï¼ˆ/api/trainingï¼‰
- âœ… æ¨¡å‹ç®¡ç†ç«¯ç‚¹ï¼ˆ/api/modelsï¼‰
- âœ… JSON åºåˆ—åŒ–é…ç½®ï¼ˆcamelCaseï¼‰
- âœ… å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶
- âœ… ä¼ ç»Ÿ MVC æ§åˆ¶å™¨ï¼ˆå‘åå…¼å®¹ï¼‰

#### 7. å®æ—¶é€šä¿¡
- âœ… SignalR Hub å®ç°
- âœ… è®­ç»ƒè¿›åº¦å®æ—¶æ¨é€

#### 8. Windows æœåŠ¡æ”¯æŒ
- âœ… Windows Service å®¿ä¸»
- âœ… æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… PowerShell å®‰è£…/å¸è½½è„šæœ¬

#### 9. æ—¥å¿—è®°å½•
- âœ… Serilog ç»“æ„åŒ–æ—¥å¿—
- âœ… ä¸­æ–‡æ—¥å¿—æ¶ˆæ¯
- âœ… å…³é”®æ“ä½œæ—¥å¿—
- âœ… æ—¥å¿—æ–‡ä»¶è½®è½¬ï¼ˆæ”¯æŒå¤šç§ç­–ç•¥ï¼šMinuteã€Hourã€Dayã€Monthã€Yearï¼‰
- âœ… åŠ¨æ€æ—¥å¿—çº§åˆ«è°ƒæ•´ï¼ˆé€šè¿‡ API ç«¯ç‚¹ï¼‰
- âœ… å®¡è®¡æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
- âœ… å¤šç¯å¢ƒæ—¥å¿—é…ç½®ï¼ˆDevelopmentã€Stagingã€Productionï¼‰
- âœ… æ…¢æ“ä½œæ£€æµ‹å’Œå‘Šè­¦

#### 10. æµ‹è¯•è¦†ç›–
- âœ… æ ¸å¿ƒå±‚å•å…ƒæµ‹è¯•ï¼ˆ31 ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡ï¼‰
- âœ… åº”ç”¨å±‚å•å…ƒæµ‹è¯•ï¼ˆ20 ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡ï¼‰
- âœ… æœåŠ¡å±‚å•å…ƒæµ‹è¯•ï¼ˆ11 ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡ï¼‰
- âœ… é›†æˆæµ‹è¯•ï¼ˆ13 ä¸ªæµ‹è¯•ï¼Œå…¨éƒ¨é€šè¿‡ï¼‰

#### 11. API æ–‡æ¡£
- âœ… Swagger/OpenAPI é›†æˆ
- âœ… äº¤äº’å¼ API æ–‡æ¡£ç•Œé¢
- âœ… Swagger UI å¯è®¿é—®ï¼šhttp://localhost:4000/api-docs

### âš ï¸ éƒ¨åˆ†å®ŒæˆåŠŸèƒ½ (50-70%)

#### 1. æ¨¡å‹è¯„ä¼°æŒ‡æ ‡
- âš ï¸ åŸºç¡€çš„å‡†ç¡®ç‡ã€æŸå¤±è®¡ç®—
- âŒ ç¼ºå°‘è¯¦ç»†çš„æ··æ·†çŸ©é˜µ
- âŒ ç¼ºå°‘ F1 åˆ†æ•°ã€å¬å›ç‡ç­‰æŒ‡æ ‡

### âŒ æœªå®ŒæˆåŠŸèƒ½ (0-30%)

#### 1. å®‰å…¨æ€§
- âŒ API èº«ä»½éªŒè¯ï¼ˆæ—  JWT/API Keyï¼‰
- âŒ æˆæƒæ§åˆ¶ï¼ˆæ— åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
- âŒ API é™æµ

#### 2. ç›‘æ§å‘Šè­¦
- âŒ æ€§èƒ½æŒ‡æ ‡é‡‡é›†
- âŒ Prometheus/Grafana é›†æˆ
- âŒ é‚®ä»¶å‘Šè­¦

#### 3. Web ç®¡ç†ç•Œé¢
- âŒ æ—  Web UI
- âŒ æ— è®­ç»ƒç›‘æ§é¢æ¿
- âŒ æ— æ•°æ®æ ‡æ³¨å·¥å…·

#### 4. é«˜çº§è®­ç»ƒåŠŸèƒ½
- âŒ è¿ç§»å­¦ä¹ ï¼ˆåŸºäºé¢„è®­ç»ƒæ¨¡å‹ï¼‰
- âŒ åˆ†å¸ƒå¼è®­ç»ƒ
- âŒ å¢é‡è®­ç»ƒ
- âŒ è‡ªåŠ¨è¶…å‚æ•°è°ƒä¼˜

#### 5. å®¹å™¨åŒ–éƒ¨ç½²
- âŒ Docker é•œåƒ
- âŒ Docker Compose é…ç½®
- âŒ Kubernetes éƒ¨ç½²æ¸…å•

---

## åŠŸèƒ½è¯´æ˜

### 1. å›¾ç‰‡ç›‘æ§ä¸åˆ†æ

ç³»ç»Ÿè‡ªåŠ¨ç›‘æ§æŒ‡å®šç›®å½•ï¼Œå½“æ£€æµ‹åˆ°æ–°å›¾ç‰‡æ—¶ï¼š

1. **éªŒè¯æ–‡ä»¶**: æ£€æŸ¥æ–‡ä»¶ç±»å‹ã€å¤§å°ã€å¯ç”¨æ€§
2. **åŠ è½½æ¨¡å‹**: ä½¿ç”¨å½“å‰æ¿€æ´»çš„ ML.NET æ¨¡å‹
3. **æ‰§è¡Œæ¨ç†**: åˆ†æå›¾ç‰‡ï¼Œè¿”å›åˆ†ç±»å’Œç½®ä¿¡åº¦
4. **æ™ºèƒ½è·¯ç”±**:
   - **ç½®ä¿¡åº¦ >= é˜ˆå€¼**: åˆ é™¤åŸå›¾ç‰‡ï¼ˆå·²æˆåŠŸåˆ†ç±»ï¼‰
   - **ç½®ä¿¡åº¦ < é˜ˆå€¼**: å¤åˆ¶åˆ°å¾…å®¡æ ¸ç›®å½•ï¼Œç”Ÿæˆåˆ†ææŠ¥å‘Š

### 2. è®­ç»ƒä»»åŠ¡ç®¡ç†

- **å¼‚æ­¥é˜Ÿåˆ—**: è®­ç»ƒä»»åŠ¡è¿›å…¥å†…å­˜é˜Ÿåˆ—ï¼Œåå°å·¥ä½œå™¨å¤„ç†
- **å¹¶å‘æ§åˆ¶**: æ”¯æŒé…ç½®æœ€å¤§å¹¶å‘è®­ç»ƒæ•°ï¼ˆé»˜è®¤ 2ï¼‰
- **ä»»åŠ¡çŠ¶æ€**: Queued â†’ Running â†’ Completed/Failed/Cancelled
- **è¿›åº¦æŠ¥å‘Š**: å®æ—¶æ›´æ–°è®­ç»ƒè¿›åº¦ï¼ˆ0.0 - 1.0ï¼‰
- **æŒä¹…åŒ–**: æ‰€æœ‰ä»»åŠ¡è®°å½•å­˜å‚¨åˆ° SQLite æ•°æ®åº“

### 3. æ¨¡å‹ç‰ˆæœ¬ç®¡ç†

- **ç‰ˆæœ¬æ³¨å†Œ**: è®­ç»ƒå®Œæˆåè‡ªåŠ¨æ³¨å†Œæ–°æ¨¡å‹ç‰ˆæœ¬
- **æ¿€æ´»åˆ‡æ¢**: æ”¯æŒåœ¨çº¿åˆ‡æ¢æ¿€æ´»æ¨¡å‹ï¼Œæ— éœ€é‡å¯
- **ç‰ˆæœ¬å›æ»š**: å¯å›æ»šåˆ°å†å²ç‰ˆæœ¬
- **å¤šæ¨¡å‹å¯¹æ¯”**: æ”¯æŒåŒæ—¶ä½¿ç”¨å¤šä¸ªæ¨¡å‹è¿›è¡Œ A/B æµ‹è¯•
- **å¯¼å…¥å¯¼å‡º**: æ”¯æŒé€šè¿‡ API å¯¼å…¥/å¯¼å‡ºæ¨¡å‹æ–‡ä»¶

### 4. æ•°æ®å¢å¼ºä¸å¹³è¡¡

#### æ•°æ®å¢å¼ºï¼ˆData Augmentationï¼‰
- **æ—‹è½¬**: éšæœºæ—‹è½¬å›¾ç‰‡ï¼ˆå¯é…ç½®è§’åº¦èŒƒå›´ï¼‰
- **ç¿»è½¬**: æ°´å¹³/å‚ç›´ç¿»è½¬
- **äº®åº¦è°ƒæ•´**: éšæœºè°ƒæ•´å›¾ç‰‡äº®åº¦

#### æ•°æ®å¹³è¡¡ï¼ˆData Balancingï¼‰
- **è¿‡é‡‡æ ·ï¼ˆOverSampleï¼‰**: å¤åˆ¶å°‘æ•°ç±»æ ·æœ¬
- **æ¬ é‡‡æ ·ï¼ˆUnderSampleï¼‰**: è£å‰ªå¤šæ•°ç±»æ ·æœ¬

---

## API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:5000`ï¼ˆå¯åœ¨ appsettings.json é…ç½®ï¼‰
- **Content-Type**: `application/json`
- **å“åº”æ ¼å¼**: JSONï¼ˆcamelCase å‘½åï¼‰

### è®­ç»ƒä»»åŠ¡ API

#### 1. å¯åŠ¨è®­ç»ƒä»»åŠ¡

```http
POST /api/training/start
Content-Type: application/json

{
  "trainingRootDirectory": "C:\\BarcodeImages\\TrainingData",
  "outputModelDirectory": "C:\\BarcodeImages\\Models",
  "validationSplitRatio": 0.2,
  "learningRate": 0.01,
  "epochs": 50,
  "batchSize": 20,
  "remarks": "ç¬¬ä¸€æ¬¡è®­ç»ƒæµ‹è¯•",
  "dataAugmentation": {
    "enable": true,
    "augmentedImagesPerSample": 3,
    "enableRotation": true,
    "rotationDegreeRange": [-15, 15]
  },
  "dataBalancing": {
    "enable": true,
    "strategy": "OverSample",
    "targetSamplesPerClass": 1000
  }
}
```

**å“åº” 200 OK:**
```json
{
  "jobId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "message": "è®­ç»ƒä»»åŠ¡å·²åˆ›å»ºå¹¶åŠ å…¥é˜Ÿåˆ—"
}
```

#### 2. æŸ¥è¯¢è®­ç»ƒçŠ¶æ€

```http
GET /api/training/status/{jobId}
```

**å“åº” 200 OK:**
```json
{
  "jobId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "state": "è¿è¡Œä¸­",
  "progress": 0.45,
  "learningRate": 0.01,
  "epochs": 50,
  "batchSize": 20,
  "message": "è®­ç»ƒä»»åŠ¡æ­£åœ¨æ‰§è¡Œ",
  "startTime": "2024-01-15T10:30:00Z",
  "completedTime": null,
  "errorMessage": null,
  "remarks": "ç¬¬ä¸€æ¬¡è®­ç»ƒæµ‹è¯•",
  "dataAugmentation": {
    "enable": true,
    "augmentedImagesPerSample": 3
  },
  "dataBalancing": {
    "enable": true,
    "strategy": "OverSample"
  }
}
```

#### 3. å–æ¶ˆè®­ç»ƒä»»åŠ¡

```http
POST /api/training/cancel/{jobId}
```

**å“åº” 202 Accepted:**
```json
{
  "message": "è®­ç»ƒä»»åŠ¡å–æ¶ˆè¯·æ±‚å·²æäº¤"
}
```

### æ¨¡å‹ç®¡ç† API

#### 1. ä¸‹è½½å½“å‰æ¿€æ´»æ¨¡å‹

```http
GET /api/models/current/download
```

**å“åº”**: äºŒè¿›åˆ¶æ–‡ä»¶æµï¼ˆapplication/octet-streamï¼‰

#### 2. æŒ‰ç‰ˆæœ¬ä¸‹è½½æ¨¡å‹

```http
GET /api/models/{versionId}/download
```

**å“åº”**: äºŒè¿›åˆ¶æ–‡ä»¶æµï¼ˆapplication/octet-streamï¼‰

#### 3. å¯¼å…¥æ¨¡å‹

```http
POST /api/models/import
Content-Type: multipart/form-data

modelFile: [binary]
versionName: "noread-prod-v1"
deploymentSlot: "Production"
setAsActive: true
notes: "ç”Ÿäº§ç¯å¢ƒæ¨¡å‹"
```

**å“åº” 201 Created:**
```json
{
  "versionId": "2b5a27d7-32ba-4d52-9f6c-9f23e8437c2f",
  "versionName": "noread-prod-v1",
  "modelPath": "C:\\BarcodeImages\\Models\\noread-prod-v1.zip",
  "isActive": true
}
```

### SignalR Hub

**Hub URL**: `/hubs/training-progress`

**äº‹ä»¶**:
- `ReceiveProgress`: æ¥æ”¶è®­ç»ƒè¿›åº¦æ›´æ–°

**ç¤ºä¾‹ï¼ˆJavaScriptï¼‰:**
```javascript
const connection = new signalR.HubConnectionBuilder()
    .withUrl("http://localhost:5000/hubs/training-progress")
    .build();

connection.on("ReceiveProgress", (jobId, progress, message) => {
    console.log(`Job ${jobId}: ${progress * 100}% - ${message}`);
});

await connection.start();
```

---

## å·¥ä½œæµç¨‹

### ç³»ç»Ÿå¯åŠ¨æµç¨‹

```
å¯åŠ¨ â†’ åŠ è½½é…ç½® â†’ åˆå§‹åŒ–ä¾èµ–æ³¨å…¥ â†’ å¯åŠ¨åå°æœåŠ¡
                                    â†“
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                     â”‚
                 DirectoryMonitoringWorker  TrainingWorker
                         â”‚                     â”‚
                    ç›‘æ§ç›®å½•å˜åŒ–           å¤„ç†è®­ç»ƒä»»åŠ¡é˜Ÿåˆ—
                         â”‚                     â”‚
                    åˆ†ææ–°å›¾ç‰‡              æ‰§è¡Œæ¨¡å‹è®­ç»ƒ
```

### å›¾ç‰‡åˆ†ææµç¨‹

```
æ–°å›¾ç‰‡ â†’ æ–‡ä»¶éªŒè¯ â†’ åŠ è½½æ¨¡å‹ â†’ ML.NET æ¨ç† â†’ è®¡ç®—ç½®ä¿¡åº¦
                                                  â†“
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 ç½®ä¿¡åº¦ >= é˜ˆå€¼        ç½®ä¿¡åº¦ < é˜ˆå€¼
                                        â†“                   â†“
                                    åˆ é™¤å›¾ç‰‡          å¤åˆ¶åˆ°å¾…å®¡æ ¸ç›®å½•
                                                      ç”Ÿæˆåˆ†ææŠ¥å‘Š
```

### è®­ç»ƒä»»åŠ¡æµç¨‹

```
API è¯·æ±‚ â†’ å‚æ•°éªŒè¯ â†’ åˆ›å»ºä»»åŠ¡ â†’ åŠ å…¥é˜Ÿåˆ— â†’ è¿”å› JobId
                                          â†“
                                   TrainingWorker æ‹‰å–
                                          â†“
                                   æ›´æ–°çŠ¶æ€: Running
                                          â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      æ•°æ®åŠ è½½            æ•°æ®å¢å¼º/å¹³è¡¡          
                           â”‚                   â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
                            ML.NET ImageClassificationTrainer
                                      â†“
                            ä¿å­˜æ¨¡å‹ + æ³¨å†Œç‰ˆæœ¬
                                      â†“
                            æ›´æ–°çŠ¶æ€: Completed
                                      â†“
                            SignalR æ¨é€å®Œæˆé€šçŸ¥
```

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- .NET 8.0 SDK æˆ–æ›´é«˜ç‰ˆæœ¬
- Windows 10/11 æˆ– Windows Server 2016+ ï¼ˆç”¨äº Windows æœåŠ¡ï¼‰
- è‡³å°‘ 4GB RAMï¼ˆæ¨è 8GB+ï¼‰
- è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ç”¨äºè®­ç»ƒæ•°æ®å’Œæ¨¡å‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/Hisoka6602/ZakYip.BarcodeReadabilityLab.git
cd ZakYip.BarcodeReadabilityLab
```

### 2. è¿˜åŸä¾èµ–

```bash
dotnet restore
```

### 3. é…ç½®

ç¼–è¾‘ `src/ZakYip.BarcodeReadabilityLab.Service/appsettings.json`:

```json
{
  "BarcodeReadabilityService": {
    "MonitorPath": "C:\\BarcodeImages\\Monitor",
    "UnableToAnalyzePath": "C:\\BarcodeImages\\Unresolved",
    "ConfidenceThreshold": 0.8,
    "ModelPath": "C:\\BarcodeImages\\Models\\model.zip"
  },
  "TrainingOptions": {
    "TrainingRootDirectory": "C:\\BarcodeImages\\TrainingData",
    "OutputModelDirectory": "C:\\BarcodeImages\\Models",
    "MaxConcurrentTrainingJobs": 2
  },
  "ApiSettings": {
    "Port": 5000,
    "Urls": "http://localhost:5000"
  }
}
```

### 4. æ„å»ºé¡¹ç›®

```bash
dotnet build
```

### 5. è¿è¡Œ

#### æ–¹å¼ 1: å¼€å‘æ¨¡å¼

```bash
cd src/ZakYip.BarcodeReadabilityLab.Service
dotnet run
```

#### æ–¹å¼ 2: ä½œä¸º Windows æœåŠ¡

```powershell
# ç®¡ç†å‘˜æƒé™è¿è¡Œ
.\install-service.ps1
```

### 6. éªŒè¯

è®¿é—® http://localhost:5000/api/training/status/00000000-0000-0000-0000-000000000000

åº”è¯¥è¿”å› 404 Not Foundï¼ˆæ­£å¸¸ï¼Œè¡¨ç¤º API å·¥ä½œæ­£å¸¸ï¼‰

### 7. è®­ç»ƒç¬¬ä¸€ä¸ªæ¨¡å‹

å‡†å¤‡è®­ç»ƒæ•°æ®ï¼ˆæŒ‰ç±»åˆ«åˆ†ç›®å½•ï¼‰:

```
C:\BarcodeImages\TrainingData\
â”œâ”€â”€ Blurry\
â”‚   â”œâ”€â”€ image1.jpg
â”‚   â”œâ”€â”€ image2.jpg
â”‚   â””â”€â”€ ...
â”œâ”€â”€ LowLight\
â”‚   â”œâ”€â”€ image1.jpg
â”‚   â””â”€â”€ ...
â””â”€â”€ Normal\
    â””â”€â”€ ...
```

å‘é€è®­ç»ƒè¯·æ±‚:

```bash
curl -X POST http://localhost:5000/api/training/start \
  -H "Content-Type: application/json" \
  -d "{\"remarks\":\"é¦–æ¬¡è®­ç»ƒ\"}"
```

---

## å½“å‰ç¼ºé™·

## å½“å‰ç¼ºé™·

### ğŸ”´ ä¸¥é‡ç¼ºé™·ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

#### 1. ç¼ºå°‘ API å®‰å…¨æ§åˆ¶
- **é—®é¢˜**: API ç«¯ç‚¹æ— èº«ä»½éªŒè¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è§¦å‘è®­ç»ƒæˆ–ç®¡ç†æ¨¡å‹
- **å½±å“**: ç”Ÿäº§ç¯å¢ƒå­˜åœ¨é‡å¤§å®‰å…¨éšæ‚£
- **å»ºè®®**: å®ç° JWT æˆ– API Key è®¤è¯

### ğŸŸ¡ ä¸€èˆ¬ç¼ºé™·ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

#### 2. é”™è¯¯å¤„ç†å¯è¿›ä¸€æ­¥ç»†åŒ–
- **é—®é¢˜**: éƒ¨åˆ†å¼‚å¸¸ç±»å‹å¯ä»¥æ›´å…·ä½“
- **å½±å“**: è°ƒè¯•ä½“éªŒå¯ä»¥æå‡
- **å»ºè®®**: ç»†åŒ–å¼‚å¸¸ç±»å‹ï¼Œæä¾›æ›´è¯¦ç»†é”™è¯¯ä¿¡æ¯

### ğŸŸ¢ æ”¹è¿›å»ºè®®ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

#### 3. æ€§èƒ½ä¼˜åŒ–
- **é—®é¢˜**: ML.NET è®­ç»ƒå‚æ•°ä½¿ç”¨é»˜è®¤å€¼
- **å½±å“**: æ¨¡å‹æ€§èƒ½å¯èƒ½ä¸æ˜¯æœ€ä¼˜
- **å»ºè®®**: å®ç°è‡ªåŠ¨è¶…å‚æ•°è°ƒä¼˜

#### 4. ç›‘æ§å‘Šè­¦
- **é—®é¢˜**: ç¼ºå°‘ Prometheus/Grafana é›†æˆ
- **å½±å“**: ç¼ºå°‘å¯è§†åŒ–ç›‘æ§é¢æ¿
- **å»ºè®®**: é›†æˆ Prometheusã€Grafana æˆ–é‚®ä»¶å‘Šè­¦

#### 5. å®¹å™¨åŒ–æ”¯æŒ
- **é—®é¢˜**: ç¼ºå°‘ Docker æ”¯æŒ
- **å½±å“**: è·¨å¹³å°éƒ¨ç½²éœ€è¦æ‰‹åŠ¨é…ç½®
- **å»ºè®®**: æä¾› Dockerfile å’Œ docker-compose.yml

---

## æœªæ¥ä¼˜åŒ–æ–¹å‘ (æŒ‰ PR å•ä½è§„åˆ’)

### ç¬¬ä¸€é˜¶æ®µï¼šç¨³å®šæ€§ä¸å®‰å…¨æ€§ (2-3 å‘¨)

#### âœ… PR #1: ä¿®å¤æµ‹è¯•å¤±è´¥ï¼ˆå·²å®Œæˆï¼‰
**ç›®æ ‡**: ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- âœ… æ‰€æœ‰æµ‹è¯•å·²é€šè¿‡ï¼ˆ75/75 æµ‹è¯•é€šè¿‡ï¼‰
- âœ… Core å±‚: 31/31 é€šè¿‡
- âœ… Application å±‚: 20/20 é€šè¿‡
- âœ… Service å±‚: 11/11 é€šè¿‡
- âœ… Integration å±‚: 13/13 é€šè¿‡

**çŠ¶æ€**: å·²å®Œæˆ

#### PR #2: å®ç° API èº«ä»½éªŒè¯
**ç›®æ ‡**: ä¿æŠ¤ API ç«¯ç‚¹å®‰å…¨
- å®ç°åŸºäº JWT çš„è®¤è¯
- æ·»åŠ è®¤è¯ä¸­é—´ä»¶
- æ›´æ–° API æ–‡æ¡£è¯´æ˜è®¤è¯æ–¹å¼
- æä¾› API Key å¤‡é€‰æ–¹æ¡ˆ

**é¢„ä¼°å·¥ä½œé‡**: 3-4 å¤©

#### âœ… PR #3: é›†æˆ Swagger/OpenAPI æ–‡æ¡£ï¼ˆå·²å®Œæˆï¼‰
**ç›®æ ‡**: æ”¹å–„ API å¯ç”¨æ€§
- âœ… å·²é›†æˆ Swashbuckle.AspNetCore
- âœ… å·²é…ç½® Swagger UI
- âœ… æ”¯æŒåœ¨ Swagger UI ä¸­æµ‹è¯• API
- âœ… Swagger å¯è®¿é—®ï¼šhttp://localhost:4000/api-docs

**çŠ¶æ€**: å·²å®Œæˆ

#### âœ… PR #4: å®Œå–„æ—¥å¿—é…ç½®ï¼ˆå·²å®Œæˆï¼‰
**ç›®æ ‡**: æå‡ç³»ç»Ÿå¯è§‚æµ‹æ€§
- âœ… é…ç½®æ—¥å¿—æ–‡ä»¶è½®è½¬ï¼ˆæ”¯æŒ Minuteã€Hourã€Dayã€Monthã€Yearï¼‰
- âœ… å®ç°åŠ¨æ€æ—¥å¿—çº§åˆ«è°ƒæ•´ï¼ˆé€šè¿‡ API ç«¯ç‚¹ï¼‰
- âœ… æ·»åŠ å…³é”®æ“ä½œçš„ç»“æ„åŒ–æ—¥å¿—ï¼ˆå®¡è®¡æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§ï¼‰
- âœ… é…ç½®ä¸åŒç¯å¢ƒçš„æ—¥å¿—è¾“å‡ºï¼ˆDevelopmentã€Stagingã€Productionï¼‰
- âœ… å®ç°æ€§èƒ½ç›‘æ§ï¼ˆæ…¢æ“ä½œæ£€æµ‹ï¼Œé»˜è®¤é˜ˆå€¼ 1000msï¼‰
- âœ… æ–°å¢æ—¥å¿—ç®¡ç† API ç«¯ç‚¹ï¼š
  - GET /api/logging/level - è·å–å½“å‰æ—¥å¿—çº§åˆ«
  - PUT /api/logging/level - è®¾ç½®æ—¥å¿—çº§åˆ«
- âœ… æ–°å¢å®¡è®¡æ—¥å¿—ä¸­é—´ä»¶ï¼Œè®°å½•æ‰€æœ‰ API è¯·æ±‚

**çŠ¶æ€**: å·²å®Œæˆ

### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½å¢å¼º (3-4 å‘¨)

#### PR #5: å®ç°æ¨¡å‹è¯„ä¼°æŒ‡æ ‡
**ç›®æ ‡**: æä¾›è®­ç»ƒè´¨é‡åé¦ˆ
- å®ç°æ··æ·†çŸ©é˜µè®¡ç®—
- æ·»åŠ  F1 åˆ†æ•°ã€å¬å›ç‡ã€ç²¾ç¡®ç‡è®¡ç®—
- åœ¨è®­ç»ƒå®Œæˆå“åº”ä¸­è¿”å›è¯¦ç»†è¯„ä¼°æŒ‡æ ‡
- æŒä¹…åŒ–è¯„ä¼°ç»“æœä¾›åç»­æŸ¥è¯¢

**é¢„ä¼°å·¥ä½œé‡**: 4-5 å¤©

#### PR #6: ä¼˜åŒ–è®­ç»ƒè¿›åº¦æŠ¥å‘Š
**ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒ
- ä¼˜åŒ– ML.NET è®­ç»ƒè¿›åº¦å›è°ƒ
- å®ç°æ›´ç²¾ç¡®çš„è¿›åº¦è®¡ç®—
- æ·»åŠ é¢„ä¼°å‰©ä½™æ—¶é—´
- æ”¹è¿› SignalR æ¨é€æ€§èƒ½

**é¢„ä¼°å·¥ä½œé‡**: 3-4 å¤©

#### PR #7: å®ç°è‡ªåŠ¨è¶…å‚æ•°è°ƒä¼˜
**ç›®æ ‡**: æå‡æ¨¡å‹è®­ç»ƒçµæ´»æ€§å’Œè´¨é‡
- å®ç°ç½‘æ ¼æœç´¢ï¼ˆGrid Searchï¼‰
- å®ç°éšæœºæœç´¢ï¼ˆRandom Searchï¼‰
- æ·»åŠ è¶…å‚æ•°éªŒè¯é€»è¾‘
- æä¾›æ¨èé…ç½®

**é¢„ä¼°å·¥ä½œé‡**: 5-6 å¤©

#### PR #8: å®Œå–„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¶ˆæ¯
**ç›®æ ‡**: æ”¹å–„è°ƒè¯•ä½“éªŒ
- ç»†åŒ–å¼‚å¸¸ç±»å‹ï¼ˆè®­ç»ƒå¼‚å¸¸ã€éªŒè¯å¼‚å¸¸ã€æ¨¡å‹å¼‚å¸¸ç­‰ï¼‰
- æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡
- å®ç°å…¨å±€å¼‚å¸¸æ—¥å¿—è®°å½•
- æ·»åŠ ç”¨æˆ·å‹å¥½çš„é”™è¯¯å“åº”

**é¢„ä¼°å·¥ä½œé‡**: 3-4 å¤©

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§ç‰¹æ€§ (4-6 å‘¨)

#### PR #9: å®ç°è¿ç§»å­¦ä¹ æ”¯æŒ
**ç›®æ ‡**: æå‡æ¨¡å‹è®­ç»ƒæ•ˆç‡
- æ”¯æŒåŸºäºé¢„è®­ç»ƒæ¨¡å‹çš„å¾®è°ƒ
- æä¾›å¸¸ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼ˆResNetã€InceptionV3 ç­‰ï¼‰
- å®ç°æ¨¡å‹è¿ç§» API
- æ·»åŠ è¿ç§»å­¦ä¹ æ–‡æ¡£

**é¢„ä¼°å·¥ä½œé‡**: 7-10 å¤©

#### PR #10: å®ç° API é™æµå’Œæˆæƒ
**ç›®æ ‡**: å¢å¼º API å®‰å…¨æ€§å’Œç¨³å®šæ€§
- å®ç°åŸºäº IP çš„è¯·æ±‚é™æµ
- å®ç°åŸºäºç”¨æˆ·çš„è¯·æ±‚é…é¢
- æ·»åŠ åŸºäºè§’è‰²çš„æˆæƒï¼ˆRBACï¼‰
- å®ç°æ“ä½œå®¡è®¡æ—¥å¿—

**é¢„ä¼°å·¥ä½œé‡**: 5-7 å¤©

#### PR #11: å®ç°ç›‘æ§å‘Šè­¦ç³»ç»Ÿ
**ç›®æ ‡**: æå‡ç³»ç»Ÿå¯é æ€§
- é›†æˆ Prometheus æŒ‡æ ‡é‡‡é›†
- é…ç½® Grafana ä»ªè¡¨æ¿
- å®ç°é‚®ä»¶/çŸ­ä¿¡å‘Šè­¦
- æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹

**é¢„ä¼°å·¥ä½œé‡**: 6-8 å¤©

#### PR #12: å®¹å™¨åŒ–æ”¯æŒ
**ç›®æ ‡**: æ”¹å–„éƒ¨ç½²ä½“éªŒ
- åˆ›å»º Dockerfile
- æä¾› docker-compose.yml
- æ”¯æŒå¤šé˜¶æ®µæ„å»º
- ä¼˜åŒ–é•œåƒå¤§å°
- æä¾› Kubernetes éƒ¨ç½²æ¸…å•

**é¢„ä¼°å·¥ä½œé‡**: 4-6 å¤©

### ç¬¬å››é˜¶æ®µï¼šWeb UI (6-8 å‘¨)

#### PR #13: Web ç®¡ç†ç•Œé¢ - åŸºç¡€æ¡†æ¶
**ç›®æ ‡**: æä¾›å¯è§†åŒ–ç®¡ç†ç•Œé¢
- é€‰æ‹©å‰ç«¯æ¡†æ¶ï¼ˆBlazor Server/React/Vueï¼‰
- å®ç°åŸºç¡€æ¡†æ¶å’Œè·¯ç”±
- å®ç°ç™»å½•/æ³¨é”€åŠŸèƒ½
- å®ç°ä¸»å¯¼èˆªå’Œå¸ƒå±€

**é¢„ä¼°å·¥ä½œé‡**: 7-10 å¤©

#### PR #14: Web ç®¡ç†ç•Œé¢ - è®­ç»ƒç®¡ç†
**ç›®æ ‡**: å¯è§†åŒ–è®­ç»ƒä»»åŠ¡ç®¡ç†
- å®ç°è®­ç»ƒä»»åŠ¡åˆ—è¡¨é¡µé¢
- å®ç°è®­ç»ƒä»»åŠ¡è¯¦æƒ…é¡µé¢
- å®ç°è®­ç»ƒä»»åŠ¡å¯åŠ¨ç•Œé¢
- å®ç°å®æ—¶è¿›åº¦ç›‘æ§ï¼ˆWebSocket/SignalRï¼‰

**é¢„ä¼°å·¥ä½œé‡**: 7-10 å¤©

#### PR #15: Web ç®¡ç†ç•Œé¢ - æ¨¡å‹ç®¡ç†
**ç›®æ ‡**: å¯è§†åŒ–æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
- å®ç°æ¨¡å‹ç‰ˆæœ¬åˆ—è¡¨
- å®ç°æ¨¡å‹å¯¼å…¥/å¯¼å‡ºç•Œé¢
- å®ç°æ¨¡å‹æ¿€æ´»åˆ‡æ¢
- å®ç°æ¨¡å‹æ€§èƒ½å¯¹æ¯”å›¾è¡¨

**é¢„ä¼°å·¥ä½œé‡**: 7-10 å¤©

#### PR #16: Web ç®¡ç†ç•Œé¢ - å›¾ç‰‡æ ‡æ³¨å·¥å…·
**ç›®æ ‡**: æä¾›æ•°æ®æ ‡æ³¨åŠŸèƒ½
- å®ç°å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆ
- å®ç°å›¾ç‰‡æ ‡æ³¨ç•Œé¢
- å®ç°æ‰¹é‡æ ‡æ³¨
- å®ç°æ ‡æ³¨å¯¼å‡º

**é¢„ä¼°å·¥ä½œé‡**: 10-14 å¤©

---

## å¼€å‘æŒ‡å—

### ç¼–ç è§„èŒƒ

è¯·ä¸¥æ ¼éµå®ˆ `.github/copilot-instructions.md` ä¸­å®šä¹‰çš„ç¼–ç è§„èŒƒã€‚

#### å…³é”®è¦ç‚¹

- âœ… **æ³¨é‡Šç”¨ä¸­æ–‡**: æ‰€æœ‰ä»£ç æ³¨é‡Šå¿…é¡»ä½¿ç”¨ç®€ä½“ä¸­æ–‡
- âœ… **å‘½åç”¨è‹±æ–‡**: ç±»åã€æ–¹æ³•åã€å˜é‡åç­‰ä½¿ç”¨è‹±æ–‡
- âœ… **ä¼˜å…ˆ record/record class**: ä¸å¯å˜æ•°æ®æ¨¡å‹ä½¿ç”¨ record
- âœ… **å¿…éœ€å±æ€§ä½¿ç”¨ required**: ç¡®ä¿å¯¹è±¡åˆå§‹åŒ–æ—¶å¿…é¡»è®¾ç½®
- âœ… **æšä¸¾å¿…é¡»æœ‰ Description**: æ‰€æœ‰æšä¸¾æˆå‘˜æ·»åŠ ä¸­æ–‡ Description
- âœ… **å¸ƒå°”å‘½å**: ä½¿ç”¨ Is/Has/Can/Should å‰ç¼€
- âœ… **ä¼˜å…ˆ decimal**: é‡‘é¢ã€ç™¾åˆ†æ¯”ç­‰ä½¿ç”¨ decimal
- âœ… **å¯ç”¨å¯ç©ºå¼•ç”¨ç±»å‹**: `<Nullable>enable</Nullable>`
- âœ… **å¼‚å¸¸å’Œæ—¥å¿—ç”¨ä¸­æ–‡**: æ‰€æœ‰å¼‚å¸¸æ¶ˆæ¯å’Œæ—¥å¿—ä½¿ç”¨ä¸­æ–‡

### æ„å»ºå’Œæµ‹è¯•

```bash
# è¿˜åŸä¾èµ–
dotnet restore

# æ„å»º
dotnet build

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
dotnet test

# è¿è¡Œç‰¹å®šé¡¹ç›®æµ‹è¯•
dotnet test tests/ZakYip.BarcodeReadabilityLab.Core.Tests

# ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š
dotnet test /p:CollectCoverage=true /p:CoverletOutputFormat=opencover
```

### æ•°æ®åº“è¿ç§»

```bash
# æ·»åŠ è¿ç§»
dotnet ef migrations add MigrationName --project src/ZakYip.BarcodeReadabilityLab.Infrastructure.Persistence

# æ›´æ–°æ•°æ®åº“
dotnet ef database update --project src/ZakYip.BarcodeReadabilityLab.Infrastructure.Persistence

# å›æ»šè¿ç§»
dotnet ef database update PreviousMigrationName --project src/ZakYip.BarcodeReadabilityLab.Infrastructure.Persistence
```

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—

åœ¨ `appsettings.Development.json` ä¸­è®¾ç½®:

```json
{
  "Serilog": {
    "MinimumLevel": {
      "Default": "Debug",
      "Override": {
        "Microsoft": "Information"
      }
    }
  }
}
```

#### 2. è°ƒè¯•è®­ç»ƒä»»åŠ¡

è®¾ç½®æ–­ç‚¹åœ¨:
- `TrainingJobService.StartTrainingAsync` - ä»»åŠ¡åˆ›å»º
- `TrainingWorker.ExecuteAsync` - ä»»åŠ¡æ‰§è¡Œ
- `MlNetImageClassificationTrainer.TrainAsync` - æ¨¡å‹è®­ç»ƒ

#### 3. è°ƒè¯• API è¯·æ±‚

ä½¿ç”¨ Postmanã€curl æˆ–æµè§ˆå™¨å¼€å‘è€…å·¥å…·æµ‹è¯• APIã€‚

---

## ç›¸å…³æ–‡æ¡£

- **[QUICKSTART.md](QUICKSTART.md)** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- **[ARCHITECTURE.md](ARCHITECTURE.md)** - é¡¹ç›®æ¶æ„è¯¦ç»†è¯´æ˜
- **[USAGE.md](USAGE.md)** - è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹å’Œåœºæ™¯
- **[TRAINING_SERVICE.md](TRAINING_SERVICE.md)** - è®­ç»ƒæœåŠ¡è¯¦ç»†è¯´æ˜
- **[DEPLOYMENT.md](DEPLOYMENT.md)** - Windows æœåŠ¡éƒ¨ç½²æŒ‡å—
- **[WINDOWS_SERVICE_SETUP.md](WINDOWS_SERVICE_SETUP.md)** - Windows æœåŠ¡è®¾ç½®æŒ‡å—
- **[LOGGING_AND_EXCEPTIONS.md](LOGGING_AND_EXCEPTIONS.md)** - æ—¥å¿—å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶
- **[LOGGING_ENHANCEMENTS.md](LOGGING_ENHANCEMENTS.md)** - æ—¥å¿—é…ç½®å¢å¼ºåŠŸèƒ½ï¼ˆæ–°å¢ï¼‰
- **[docs/TRAINING_HYPERPARAMETER_GUIDE.md](docs/TRAINING_HYPERPARAMETER_GUIDE.md)** - è®­ç»ƒè¶…å‚æ•°æ¨èé…ç½®

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### æäº¤ Issue

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
- é—®é¢˜æè¿°
- é‡ç°æ­¥éª¤
- æœŸæœ›è¡Œä¸º
- å®é™…è¡Œä¸º
- ç¯å¢ƒä¿¡æ¯ï¼ˆ.NET ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰

### æäº¤ Pull Request

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'æ·»åŠ æŸä¸ªç‰¹æ€§'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

è¯·ç¡®ä¿ï¼š
- éµå®ˆç¼–ç è§„èŒƒ
- æ·»åŠ å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## æµ‹è¯•çŠ¶æ€

### å½“å‰æµ‹è¯•ç»“æœ

- âœ… **Core å±‚**: 31/31 é€šè¿‡
- âœ… **Application å±‚**: 20/20 é€šè¿‡
- âœ… **Service å±‚**: 11/11 é€šè¿‡
- âœ… **Integration å±‚**: 13/13 é€šè¿‡

**æ€»è®¡**: 75/75 æµ‹è¯•é€šè¿‡ (100%)

### æµ‹è¯•è¦†ç›–ç‡

- **Core å±‚**: ~90%
- **Application å±‚**: ~85%
- **Service å±‚**: ~80%
- **æ€»ä½“**: ~85% (ä¼°è®¡)

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## è”ç³»æ–¹å¼

- **ä½œè€…**: Hisoka6602
- **GitHub**: https://github.com/Hisoka6602/ZakYip.BarcodeReadabilityLab
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/Hisoka6602/ZakYip.BarcodeReadabilityLab/issues)

---

## æ›´æ–°æ—¥å¿—

### 2025-11-16 - é¡¹ç›®ä¿®å¤ä¸é‡æ„

#### ä¿®å¤çš„ç¼–è¯‘é—®é¢˜
1. âœ… ä¿®å¤ MlNetBarcodeReadabilityAnalyzer.cs è¯­æ³•é”™è¯¯
2. âœ… ä¿®å¤ ML.NET 5.0 API å…¼å®¹æ€§é—®é¢˜ï¼ˆArchitectureã€Metrics ç»“æ„å˜åŒ–ï¼‰
3. âœ… ä¿®å¤ SixLabors.ImageSharp API å˜åŒ–ï¼ˆBrightness æ–¹æ³•ï¼‰
4. âœ… ä¿®å¤ IOptionsMonitorCache API å˜åŒ–ï¼ˆTryUpdate â†’ TryRemove + TryAddï¼‰
5. âœ… ä¿®å¤ Program.cs ç»“æ„é—®é¢˜
6. âœ… ä¿®å¤æµ‹è¯•é¡¹ç›®ä¸­çš„å¤šä¸ªé—®é¢˜

#### æ”¹è¿›
- é¡¹ç›®ç°åœ¨å¯ä»¥æˆåŠŸç¼–è¯‘
- æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•å…¨éƒ¨é€šè¿‡
- æ›´æ–°å¹¶å®Œå–„ README æ–‡æ¡£

---

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [ML.NET](https://github.com/dotnet/machinelearning) - Microsoft çš„æœºå™¨å­¦ä¹ æ¡†æ¶
- [ImageSharp](https://github.com/SixLabors/ImageSharp) - è·¨å¹³å°å›¾åƒå¤„ç†åº“
- [Serilog](https://github.com/serilog/serilog) - ç»“æ„åŒ–æ—¥å¿—åº“
- [xUnit](https://github.com/xunit/xunit) - æµ‹è¯•æ¡†æ¶
- [Moq](https://github.com/moq/moq4) - Mock æ¡†æ¶

---

**Built with â¤ï¸ using .NET 8 and ML.NET**
